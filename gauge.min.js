(function(){
'use strict';window.Gauge=Gauge;function Gauge(b,d,e,c,f,g,h,k){this.initialize(b,d,e,c,f,g,h,k);window.addEventListener("resize",function(c){this.initialize(this.div,this.prefix,this.value,this.suffix,this.min,this.max,this.background,this.textColor);this.setValue(e)}.bind(this))}
Gauge.prototype.initialize=function(b,d,e,c,f,g,h,k){this.doWhenLoaded(function(){this.div=b;this.prefix=d;this.value=e;this.suffix=c;this.min=f;this.max=g;this.background=h;this.textColor=k;this.generateCanvas(b);this.size=this.height<this.width?this.height:this.width;this.min=f;this.max=g;this.canvas.style["background-color"]=h;this.textColor=k})};
Gauge.prototype.generateCanvas=function(b){var d=window.devicePixelRatio||1,e=b.getBoundingClientRect(),c=document.createElement("canvas");this.width=Math.round(e.width);this.height=Math.round(e.height);c.width=this.width*d;c.height=this.height*d;this.ctx=c.getContext("2d");this.ctx.scale(d,d);b.style.position="relative";b.style.overflow="hidden";b.style.top="0px";b.style.left="0px";c.style.position="absolute";c.style.top="0px";c.style.left="0px";c.style.height=this.height+"px";c.style.width=this.width+
"px";b.innerHTML="";b.appendChild(c);this.canvas=c};
Gauge.prototype.setValue=function(b,d){void 0==d&&(d=b);this.ctx.clearRect(0,0,this.width,this.height);for(var e=(this.max+"").length-(d+"").length,c="",f=0;f<e;f++)c=" "+c;d=c+this.prefix+d+this.suffix+"";c=200;this.ctx.font="bold "+c+"px monospace, Arial, Helvetica, sans-serif";f=this.ctx.measureText(d).width;e=.9*this.size/2;c=f/c;c=Math.sqrt(e*e/(.25+c*c/4));c=Math.round(.85*c);this.ctx.font="bold "+c+"px monospace, Arial, Helvetica, sans-serif";this.ctx.fillStyle=this.textColor;this.ctx.textAlign=
"center";this.ctx.textBaseline="middle";this.ctx.fillText(d,this.width/2,this.height/2);b=(b-this.min)/(this.max-this.min);this.ctx.beginPath();this.ctx.lineWidth=.08*this.size;d=new Color(0,0,255);e=new Color(255,0,0);this.ctx.strokeStyle=d.mix(e,b).rgb();this.ctx.arc(this.width/2,this.height/2,.9*this.size/2,Math.PI-Math.PI/4,Math.PI/4-(1-b)*(Math.PI+Math.PI/2),!1);this.ctx.stroke()};
Gauge.prototype.animateValue=function(b,d){this.doWhenLoaded(function(){this.currentValue=this.min;this.value=b;this.animationTime=d;window.requestAnimationFrame(this.animation.bind(this))})};var a=!0;
Gauge.prototype.animation=function(b){if(this.lastTime){var d=b-this.lastTime;this.lastTime=b;this.currentValue+=(this.value-this.min)*d/this.animationTime}else this.firstTime=this.lastTime=b;this.setValue(this.currentValue,this.value);this.currentValue<this.value?window.requestAnimationFrame(this.animation.bind(this)):this.setValue(this.value,this.value)};
function Color(b,d,e){this.r=b;this.g=d;this.b=e;this.rgb=function(){return"rgb("+this.r+","+this.g+","+this.b+")"};this.mix=function(c,b){var d=this.r-b*(this.r-c.r),e=this.g-b*(this.g-c.g);c=this.b-b*(this.b-c.b);b=255/Math.max(d,e,c);return new Color(d*b,e*b,c*b)}}var loaded=!1;window.addEventListener("load",function(){loaded=!0});Gauge.prototype.doWhenLoaded=function(b){loaded?b.bind(this)():window.addEventListener("load",function(){b.bind(this)()}.bind(this))};
}).call(this)
