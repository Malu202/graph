(function(){
'use strict';window.Gauge=Gauge;function Gauge(b,c,e,d,f,g,h,k){this.initialize(b,c,e,d,f,g,h,k);window.addEventListener("resize",function(b){this.initialize(this.div,this.prefix,this.value,this.suffix,this.min,this.max,this.background,this.textColor);this.setValue(e)}.bind(this))}
Gauge.prototype.initialize=function(b,c,e,d,f,g,h,k){this.doWhenLoaded(function(){this.div=b;this.prefix=c;this.value=e;this.suffix=d;this.min=f;this.max=g;this.background=h;this.textColor=k;this.generateCanvas(b);this.size=this.height<this.width?this.height:this.width;this.min=f;this.max=g;this.canvas.style["background-color"]=h;this.textColor=k})};
Gauge.prototype.generateCanvas=function(b){var c=window.devicePixelRatio||1,e=b.getBoundingClientRect(),d=document.createElement("canvas");this.width=Math.round(e.width);this.height=Math.round(e.height);d.width=this.width*c;d.height=this.height*c;this.ctx=d.getContext("2d");this.ctx.scale(c,c);b.style.position="relative";b.style.overflow="hidden";b.style.top="0px";b.style.left="0px";d.style.position="absolute";d.style.top="0px";d.style.left="0px";d.style.height=this.height+"px";d.style.width=this.width+
"px";b.innerHTML="";b.appendChild(d);this.canvas=d};
Gauge.prototype.setValue=function(b,c){void 0==c&&(c=b);this.ctx.clearRect(0,0,this.width,this.height);for(var e=(this.max+"").length-(c+"").length,d="",f=0;f<e;f++)d=" "+d;c=d+this.prefix+c+this.suffix+"";this.ctx.font="bold "+this.size/c.length+"px Arial, Helvetica, sans-serif";this.ctx.fillStyle=this.textColor;this.ctx.textAlign="center";this.ctx.textBaseline="middle";this.ctx.fillText(c,this.width/2,this.height/2);b=(b-this.min)/(this.max-this.min);this.ctx.beginPath();this.ctx.lineWidth=.08*
this.size;c=new Color(0,0,255);e=new Color(255,0,0);this.ctx.strokeStyle=c.mix(e,b).rgb();this.ctx.arc(this.width/2,this.height/2,.9*this.size/2,Math.PI-Math.PI/4,Math.PI/4-(1-b)*(Math.PI+Math.PI/2),!1);this.ctx.stroke()};Gauge.prototype.animateValue=function(b,c){this.doWhenLoaded(function(){this.currentValue=this.min;this.value=b;this.animationTime=c;window.requestAnimationFrame(this.animation.bind(this))})};var a=!0;
Gauge.prototype.animation=function(b){if(this.lastTime){var c=b-this.lastTime;this.lastTime=b;this.currentValue+=(this.value-this.min)*c/this.animationTime}else this.firstTime=this.lastTime=b;this.setValue(this.currentValue,this.value);this.currentValue<this.value?window.requestAnimationFrame(this.animation.bind(this)):this.setValue(this.value,this.value)};
function Color(b,c,e){this.r=b;this.g=c;this.b=e;this.rgb=function(){return"rgb("+this.r+","+this.g+","+this.b+")"};this.mix=function(b,c){var d=this.r-c*(this.r-b.r),e=this.g-c*(this.g-b.g);b=this.b-c*(this.b-b.b);c=255/Math.max(d,e,b);return new Color(d*c,e*c,b*c)}}var loaded=!1;window.addEventListener("load",function(){loaded=!0});Gauge.prototype.doWhenLoaded=function(b){loaded?b.bind(this)():window.addEventListener("load",function(){b.bind(this)()}.bind(this))};
}).call(this)
