(function(){
'use strict';window.Gauge=Gauge;function Gauge(b,d,c,g,h,k,e){this.doWhenLoaded(function(){var f=this.generateCanvas(b);if(null==c||""==c)c=d;this.height=f.height;this.width=f.width;this.size=this.height<this.width?this.height:this.width;this.min=g;this.max=h;this.ctx=f.getContext("2d");f.style["background-color"]=k;this.textColor=e})}
Gauge.prototype.generateCanvas=function(b){var d=b.getBoundingClientRect(),c=document.createElement("canvas");c.width=d.width;c.height=d.height;b.style.position="relative";b.style.top="0px";b.style.left="0px";c.style.position="absolute";c.style.top="0px";c.style.left="0px";b.appendChild(c);return c};
Gauge.prototype.changeValue=function(b,d){this.ctx.clearRect(0,0,this.width,this.height);this.ctx.font="bold "+this.size/(d+"").length+"px Arial, Helvetica, sans-serif";this.ctx.fillStyle=this.textColor;this.ctx.textAlign="center";this.ctx.textBaseline="middle";this.ctx.fillText(d,this.width/2,this.height/2);b=(b-this.min)/(this.max-this.min);this.ctx.beginPath();this.ctx.lineWidth=.08*this.size;d=new Color(0,0,255);var c=new Color(255,0,0);this.ctx.strokeStyle=d.mix(c,b).rgb();this.ctx.arc(this.width/
2,this.height/2,.9*this.size/2,Math.PI-Math.PI/4,Math.PI/4-(1-b)*(Math.PI+Math.PI/2),!1);this.ctx.stroke()};Gauge.prototype.animateValue=function(b,d,c){this.doWhenLoaded(function(){this.currentValue=this.min;this.value=b;this.displayValue=d;this.animationTime=c;window.requestAnimationFrame(this.animation.bind(this))})};var a=!0;
Gauge.prototype.animation=function(b){if(this.lastTime){var d=b-this.lastTime;this.lastTime=b;this.currentValue+=(this.value-this.min)*d/this.animationTime}else this.firstTime=this.lastTime=b;this.changeValue(this.currentValue,this.displayValue);this.currentValue<this.value?window.requestAnimationFrame(this.animation.bind(this)):this.changeValue(this.value,this.displayValue)};
function Color(b,d,c){this.r=b;this.g=d;this.b=c;this.rgb=function(){return"rgb("+this.r+","+this.g+","+this.b+")"};this.mix=function(b,c){var d=this.r-c*(this.r-b.r),e=this.g-c*(this.g-b.g);b=this.b-c*(this.b-b.b);c=255/Math.max(d,e,b);return new Color(d*c,e*c,b*c)}}var loaded=!1;window.addEventListener("load",function(){loaded=!0});Gauge.prototype.doWhenLoaded=function(b){loaded?b.bind(this)():window.addEventListener("load",function(){b.bind(this)()}.bind(this))};
}).call(this)
