(function(){
'use strict';var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,e,b){a!=Array.prototype&&a!=Object.prototype&&(a[e]=b.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,e,b,c){if(e){b=$jscomp.global;a=a.split(".");for(c=0;c<a.length-1;c++){var d=a[c];d in b||(b[d]={});b=b[d]}a=a[a.length-1];c=b[a];e=e(c);e!=c&&null!=e&&$jscomp.defineProperty(b,a,{configurable:!0,writable:!0,value:e})}};$jscomp.polyfill("Array.prototype.fill",function(a){return a?a:function(a,b,c){var d=this.length||0;0>b&&(b=Math.max(0,d+b));if(null==c||c>d)c=d;c=Number(c);0>c&&(c=Math.max(0,d+c));for(b=Number(b||0);b<c;b++)this[b]=a;return this}},"es6","es3");
window.Plot=Plot;function Plot(a,e){this.doWhenLoaded(function(){this.generateCanvas(a);for(var b in e)this[b]=e[b];this.applyDefaultSettings();this.bottomMargin=0;this.ctx=this.canvas.getContext("2d");this.canvas.style["background-color"]=this.backgroundColor;this.calculateDataRanges();this.calculateDrawingRanges();this.calculateDrawingProperties();this.scaleData()})}
Plot.prototype.generateCanvas=function(a){var e=window.devicePixelRatio||1,b=a.getBoundingClientRect(),c=document.createElement("canvas");this.width=Math.round(b.width);this.height=Math.round(b.height);c.width=this.width*e;c.height=this.height*e;this.ctx=c.getContext("2d");this.ctx.scale(e,e);a.style.position="relative";a.style.overflow="hidden";a.style.top="0px";a.style.left="0px";c.style.position="absolute";c.style.top="0px";c.style.left="0px";c.style.height=b.height+"px";c.style.width=b.width+
"px";a.appendChild(c);this.canvas=c};
Plot.prototype.applyDefaultSettings=function(){var a={backgroundColor:"#4caf50",xAxisSize:.05,yAxisSize:.05,topMargin:.05,rightMargin:.05,xAxisLabelMaxDecimals:2,yAxisLabelMaxDecimals:2,yAxisLabelSuffix:"",yAxisLabelPrefix:"",xAxisLabelSuffix:"",xAxisLabelPrefix:"",xAxisMaxLabels:11,yAxisMaxLabels:15,drawGridLineX:!0,drawGridLineY:!0,preferredLabelStepsX:[1,2,2.5,5],preferredLabelStepsY:[1,2,2.5,5],equalLabelSize:!0},e={type:"line",color:"#fff",linewidth:5,dataPointRadius:4,dataPointLinewidth:2,xHighlight:[],
yHighlight:[]},b={color:"#fff",shadowColor:"#80e27e",linewidth:4,dataPointRadius:1.5,xHighlight:[],yHighlight:[]},c;for(c in a)void 0==this[c]&&(this[c]=a[c]);a=this.graphs.length;for(c=0;c<a;c++)if("shadow"==this.graphs[c].type)for(var d in b)void 0==this.graphs[c][d]&&(this.graphs[c][d]=b[d]);else for(d in e)void 0==this.graphs[c][d]&&(this.graphs[c][d]=e[d])};
Plot.prototype.calculateDataRanges=function(){this.allXData=[];this.allYData=[];for(var a=0;a<this.graphs.length;a++)this.allXData=this.allXData.concat(this.graphs[a].x),this.allXData=this.allXData.concat(this.graphs[a].xHighlight),this.allYData=this.allYData.concat(this.graphs[a].y),this.allYData=this.allYData.concat(this.graphs[a].yHighlight);this.minX=Math.min.apply(null,this.allXData);this.minY=Math.min.apply(null,this.allYData);this.maxX=Math.max.apply(null,this.allXData);this.maxY=Math.max.apply(null,
this.allYData);this.xDataRange=this.maxX-this.minX;this.yDataRange=this.maxY-this.minY;this.orderX=.1*orderOfMagnitude(this.xDataRange);a=Math.pow(10,-this.xAxisLabelMaxDecimals);a>this.orderX&&(this.orderX=a);this.decimalsX=-orderToDecimalCount(this.orderX);this.orderY=.1*orderOfMagnitude(this.yDataRange);a=Math.pow(10,-this.yAxisLabelMaxDecimals);a>this.orderY&&(this.orderY=a);this.decimalsY=-orderToDecimalCount(this.orderY)};
Plot.prototype.calculateDrawingRanges=function(a,e,b,c){this.minPlottingX=null==a?floorToDecimals(Math.min.apply(null,this.allXData),this.decimalsX):a;this.minPlottingY=null==e?floorToDecimals(Math.min.apply(null,this.allYData),this.decimalsY):e;this.maxPlottingX=null==b?ceilToDecimals(Math.max.apply(null,this.allXData),this.decimalsX):b;this.maxPlottingY=null==c?ceilToDecimals(Math.max.apply(null,this.allYData),this.decimalsY):c;this.xPlottingRange=this.maxPlottingX-this.minPlottingX;this.yPlottingRange=
this.maxPlottingY-this.minPlottingY;this.xScaling=this.width/this.xPlottingRange;this.yScaling=this.height/this.yPlottingRange;this.yScaling*=1-(this.topMargin+this.bottomMargin+this.xAxisSize);this.xScaling*=1-this.yAxisSize-this.rightMargin;this.bottomOffset=(this.bottomMargin+this.xAxisSize)*this.height;this.topOffset=this.topMargin*this.height;this.leftOffset=this.yAxisSize*this.width;this.rightOffset=this.rightMargin*this.width;this.bottom=this.height};
function floorToDecimals(a,e){return Math.floor(a*Math.pow(10,e))/Math.pow(10,e)}function ceilToDecimals(a,e){return Math.ceil(a*Math.pow(10,e))/Math.pow(10,e)}
Plot.prototype.scaleData=function(){for(var a=0;a<this.graphs.length;a++)this.graphs[a].xCoordinates=scaleCoordinates(this.graphs[a].x,this.xScaling,this.minPlottingX,this.leftOffset),this.graphs[a].yCoordinates=scaleAndInvertCoordinates(this.graphs[a].y,this.yScaling,this.minPlottingY,this.bottomOffset,this.bottom),this.graphs[a].xCoordinatesHighlight=scaleCoordinates(this.graphs[a].xHighlight,this.xScaling,this.minPlottingX,this.leftOffset),this.graphs[a].yCoordinatesHighlight=scaleAndInvertCoordinates(this.graphs[a].yHighlight,
this.yScaling,this.minPlottingY,this.bottomOffset,this.bottom)};Plot.prototype.calculateLabelHeightYaxis=function(){var a=round(this.maxPlottingY+this.dataStepSizeY,this.yAxisLabelMaxDecimals);isNaN(a)&&!isNaN(this.maxPlottingY+this.dataStepSizeY)&&console.error("To many decimals, or numbers to long, cannot round, try reducing MaxDecimals");this.longestLabelY=a.toString().length+this.yAxisLabelPrefix.length+this.yAxisLabelSuffix.length;this.labelHeightY=1.8*this.yAxisWidth/this.longestLabelY};
Plot.prototype.calculateDrawingProperties=function(){this.calculateDrawingPropertiesX();this.calculateDrawingPropertiesY();this.xLabelNames?(this.gridLineCountX=this.xLabelNames.length,this.drawingStepSizeX=this.xAxisWidth/(this.gridLineCountX-1),this.dataStepSizeX=this.xDataRange/(this.gridLineCountX-1),this.calculateDrawingRanges(null,null,null,null)):this.calculateStepSizeX();this.calculateStepSizeY()};
Plot.prototype.calculateDrawingPropertiesX=function(){this.xAxisHeight=this.bottomOffset;this.xAxisWidth=this.width-this.leftOffset-this.rightOffset;this.longestLabelX=round(this.maxPlottingX,this.xAxisLabelMaxDecimals).toString().length+this.xAxisLabelPrefix.length+this.xAxisLabelSuffix.length;this.labelHeightX=this.xAxisHeight;this.longestLabelWidthX=this.longestLabelX*this.labelHeightX};
Plot.prototype.calculateDrawingPropertiesY=function(){this.yAxisHeight=this.height-this.topOffset-this.bottomOffset;this.yAxisWidth=this.leftOffset;this.longestLabelY=round(this.maxPlottingY+this.dataStepSizeY,this.yAxisLabelMaxDecimals).toString().length+this.yAxisLabelPrefix.length+this.yAxisLabelSuffix.length};
Plot.prototype.calculateStepSizeX=function(){var a=this.preferredLabelStepsX,e=this.orderX;this.preferredLabelStepsX.forEach(function(b,c){a[c]*=e});for(var b=0;b<a.length;b++){var c=a[b]-this.maxX%a[b];c==a[b]&&(c=0);var d=this.minX-this.minX%a[b];c=this.maxX+c;this.gridLineCountX=(c-d)/a[b]+1;this.drawingStepSizeX=this.xAxisWidth/(this.gridLineCountX-1);this.dataStepSizeX=a[b];var f=this.drawingStepSizeX<this.longestLabelWidthX;if(this.gridLineCountX>this.xAxisMaxLabels||f)b==a.length-1&&(this.preferredLabelStepsX.forEach(function(b,
c){a[c]*=10}),b=-1);else{this.calculateDrawingRanges(d,this.minY,c,this.maxY);break}}};
Plot.prototype.calculateStepSizeY=function(){var a=this.preferredLabelStepsY,e=this.orderY;this.preferredLabelStepsY.forEach(function(b,c){a[c]*=e});for(var b=0;b<a.length;b++){var c=a[b]-this.maxY%a[b];c==a[b]&&(c=0);var d=this.minY-this.minY%a[b];c=this.maxY+c;this.gridLineCountY=(c-d)/a[b]+1;this.drawingStepSizeY=this.yAxisHeight/(this.gridLineCountY-1);this.dataStepSizeY=a[b];this.calculateLabelHeightYaxis();var f=this.drawingStepSizeY<this.labelHeightY;if(this.gridLineCountY>this.yAxisMaxLabels||
f)b==a.length-1&&(this.preferredLabelStepsY.forEach(function(b,c){a[c]*=10}),b=-1);else{this.calculateDrawingRanges(this.minX,d,this.maxX,c);break}}};
Plot.prototype.drawAxis=function(){drawGridLineX("#fff",this.leftOffset,this.height-this.bottomOffset,this.width-this.leftOffset-this.rightOffset,this.ctx);drawGridLineY("#fff",this.leftOffset,this.height-this.bottomOffset,this.height-this.topOffset-this.bottomOffset,this.ctx);for(var a=0;a<this.gridLineCountY;a+=1){var e=this.topOffset+this.yAxisHeight-a*this.drawingStepSizeY,b=this.minPlottingY+this.dataStepSizeY*a;b=round(b,this.longestLabelY);var c=this.longestLabelY-b.toString().length-this.yAxisLabelPrefix.length-
this.yAxisLabelSuffix.length;c>this.yAxisLabelMaxDecimals&&(c=this.yAxisLabelMaxDecimals);b=fillWithDecimalZeros(b,c);b=this.yAxisLabelPrefix+b+this.yAxisLabelSuffix;drawTextWithHeight(b,this.yAxisWidth-this.longestLabelY*this.labelHeightY/2,e,this.labelHeightY,"#fff",this.ctx);this.drawGridLineX&&drawGridLineX("#fff",this.leftOffset,e,this.width-this.leftOffset-this.rightOffset,this.ctx)}for(a=0;a<this.gridLineCountX;a+=1)e=this.leftOffset+a*this.drawingStepSizeX,this.xLabelNames?b=this.xLabelNames[a]:
(b=this.minPlottingX+this.dataStepSizeX*a,b=round(b,this.longestLabelX),c=this.longestLabelX-b.toString().length-this.xAxisLabelPrefix.length-this.xAxisLabelSuffix.length,c>this.xAxisLabelMaxDecimals&&(c=this.xAxisLabelMaxDecimals),b=fillWithDecimalZeros(b,c)),b=this.xAxisLabelPrefix+b+this.xAxisLabelSuffix,c=this.xAxisHeight/2,this.equalLabelSize&&this.labelHeightX>this.labelHeightY&&(this.labelHeightX=this.labelHeightY),drawTextWithHeight(b,e-b.length*this.labelHeightX/4,this.height-this.bottomOffset+
c,this.labelHeightX,"#fff",this.ctx),this.drawGridLineY&&drawGridLineY("#fff",e,this.height-this.bottomOffset,this.height-this.topOffset-this.bottomOffset,this.ctx)};
Plot.prototype.draw=function(){for(var a=0;a<this.graphs.length;a++)"line"==this.graphs[a].type?(drawLineInterpolation(this.graphs[a].xCoordinates,this.graphs[a].yCoordinates,this.graphs[a].color,this.graphs[a].linewidth,this.ctx),drawDataPoints(this.graphs[a].xCoordinatesHighlight,this.graphs[a].yCoordinatesHighlight,this.graphs[a].color,this.graphs[a].dataPointRadius,this.graphs[a].dataPointLinewidth,!1,this.ctx)):"shadow"==this.graphs[a].type&&(drawLineInterpolation(this.graphs[a].xCoordinates,
this.graphs[a].yCoordinates,this.graphs[a].color,this.graphs[a].linewidth,this.ctx),drawDataPoints(this.graphs[a].xCoordinatesHighlight,this.graphs[a].yCoordinatesHighlight,this.graphs[a].color,this.graphs[a].dataPointRadius,this.graphs[a].linewidth,!0,this.ctx),drawShadowInterpolation(this.graphs[a].xCoordinates,this.graphs[a].yCoordinates,this.graphs[a].shadowColor,this.bottom-this.bottomOffset,this.ctx));this.drawAxis()};
function scaleCoordinates(a,e,b,c){for(var d=[],f=0;f<a.length;f++)d[f]=e*(a[f]-b)+c;return d}function scaleAndInvertCoordinates(a,e,b,c,d){for(var f=[],g=0;g<a.length;g++)f[g]=d-e*(a[g]-b)-c;return f}function drawTextWithHeight(a,e,b,c,d,f){var g=c/20;e/=g;b/=g;f.save();f.font="20px sans serif";f.fillStyle=d;f.scale(g,g);f.fillText(a,e,b+c/(3*g));f.restore()}function drawGridLineX(a,e,b,c,d){d.beginPath();d.strokeStyle=a;d.lineWidth=1;d.moveTo(e,b);d.lineTo(e+c,b);d.stroke()}
function drawGridLineY(a,e,b,c,d){d.beginPath();d.strokeStyle=a;d.lineWidth=1;d.moveTo(e,b);d.lineTo(e,b-c);d.stroke()}function drawDataPoints(a,e,b,c,d,f,g){for(var h=0;h<a.length;h++)drawDataPoint(a[h],e[h],b,c,d,f,g)}
var drawDataPoint=function(a,e,b,c,d,f,g){g.lineWidth=d;g.strokeStyle=b;g.beginPath();g.arc(a,e,c,0,2*Math.PI,!0);g.fillStyle=f?b:null;g.fill();g.stroke();f||(g.strokeStyle="rgb(255, 255, 255)",g.globalCompositeOperation="destination-out",g.fillStyle="rgba(255,255,255,255)",g.lineWidth=1,g.beginPath(),g.arc(a,e,c-d/2,0,2*Math.PI,!0),g.fill(),g.stroke(),g.globalCompositeOperation="source-over")},drawLineInterpolation=function(a,e,b,c,d){d.lineWidth=c;d.strokeStyle=b;for(var f=0;f<a.length;f++)d.beginPath(),
d.moveTo(a[f],e[f]),d.lineTo(a[f+1],e[f+1]),d.stroke();d.fillStyle=b;d.linewidth=1;b=Math.ceil(c/2)-1;for(f=0;f<a.length;f++)d.beginPath(),d.arc(a[f],e[f],b,0,2*Math.PI,!0),d.fill()},drawShadowInterpolation=function(a,e,b,c,d){d.globalCompositeOperation="destination-over";d.lineWidth=1;d.strokeStyle=b;d.fillStyle=b;for(b=0;b<a.length;b++)d.beginPath(),d.moveTo(a[b],e[b]),d.lineTo(a[b],c),d.lineTo(a[b+1],c),d.lineTo(a[b+1],e[b+1]),d.fill(),d.stroke();d.globalCompositeOperation="source-over"};
function round(a,e){a=a.toString();var b=a.indexOf("E"),c=a.indexOf("e"),d=0;-1<c?(d=parseFloat(a.substring(c+1)),a=a.substring(0,c)):-1<b&&(d=parseFloat(a.substring(b+1)),a=a.substring(0,b));return Number(Math.round(a+"e"+(d+e))+"e-"+e)}function orderOfMagnitude(a){return Math.pow(10,Math.floor(Math.log(Math.abs(a))/Math.LN10+1E-9))}function orderToDecimalCount(a){return Math.round(Math.log(a)/Math.log(10))}
function toFixedDecimals(a,e){a+="";var b=a.toString().indexOf(".");if(-1==b)for(0<e&&(a+="."),b=0;b<e;b++)a+="0";else{var c=a.toString().length-(b+1);for(b=0;b<e-c;b++)a+="0"}return a}function fillWithDecimalZeros(a,e){a=a.toString();var b=-1==a.indexOf(".");if(b&&1==e)return a;b&&1<e&&(a+=".",e--);for(b=0;b<e;b++)a+="0";return a}var loaded=!1;window.addEventListener("load",function(){loaded=!0});Plot.prototype.doWhenLoaded=function(a){loaded?a.bind(this)():window.addEventListener("load",function(){a.bind(this)()}.bind(this))};
}).call(this)
